import { useState, useEffect } from "react";
import { useDispatch, useSelector } from 'react-redux';
import helper from '../../utils/Helper';
import { setUser } from '../../redux/userSlice';
import { setStep } from '../../redux/simulationStepSlice';
import { SIMULATION_ENGINE_STEPS } from '../../utils/Constants';
import SEDualSelection from "../../components/SimulationEngine/SEDualSelection";
import { Loader2 } from "lucide-react";

function Salutation() {
    const dispatch = useDispatch();
    const [isInitializing, setIsInitializing] = useState(true);
    const user = useSelector((state) => state.user);
    const [salutationSelected, setSalutationSelected] = useState('Monsieur');

    // Initialize user data
    useEffect(() => {
        const initializeData = () => {
            
            if (!user) return;

            
            setSalutationSelected(user?.salutationSelected || 'Monsieur');
            setIsInitializing(false);
        };

        initializeData();
    }, []);

    const handleSalutationSelection = (item) => {
        setSalutationSelected(item);
        updateWendogouser(SIMULATION_ENGINE_STEPS.BIRTHDATE, item);
    };

    const handleContinue = () => {
        updateWendogouser(SIMULATION_ENGINE_STEPS.BIRTHDATE, salutationSelected);
    };

    const updateWendogouser = (simulationStep, salutation) => {
        dispatch(setStep(simulationStep));
        const updatedUser = {
            ...user,
            simulationStep,
            salutation,
            date: new Date().toISOString()
        };
        helper.setLocalStorageWithExpiration('wendogouser', updatedUser);
        dispatch(setUser(updatedUser));
    };

    // SVG icons
    const monsieurSVG =  <svg width="61px" height="66.75px" viewBox="0 0 61 66.75" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink">
                            <title>Shape</title>
                            <g id="Page-1" stroke="none" strokeWidth={1} fill="none" fillRule="evenodd">
                            <path d="M52.7172852,45.3222656 L40.5081788,41.5524902 C40.5079957,41.5524292 40.5079957,41.5523071 40.5078126,41.5522461 L38.8598634,41.041687 L38.8598634,38.6679687 L40.6655275,37.1196289 C43.1977541,34.9428711 44.6499025,31.7792969 44.6499025,28.4399414 L44.6499025,27.4599609 L45.3398439,27.4599609 C47.7880861,27.4599609 49.7802736,25.4682617 49.7802736,23.0200195 L49.7802736,20.9301757 C49.7802736,20.1254882 49.4633791,19.3583984 48.879883,18.7626952 C48.3210451,18.2158812 47.5961916,17.9119262 46.8300783,17.8818358 L46.8300783,10.25 C46.8300783,8.9233398 45.9096681,7.7988281 44.6601564,7.5024414 C44.6235352,3.2924805 38.4169922,0 30.5,0 C22.5830078,0 16.3764648,3.2924805 16.3398437,7.5024414 C15.090332,7.7988281 14.1699218,8.9233398 14.1699218,10.25 L14.1699218,17.8848877 C13.4043578,17.9118652 12.6710815,18.2140503 12.102539,18.7705078 C11.5268554,19.3583984 11.2099609,20.1254883 11.2099609,20.9301758 L11.2099609,23.0200196 C11.2099609,25.4682618 13.2016601,27.459961 15.6499023,27.459961 L16.3398437,27.459961 L16.3398437,28.4399415 C16.3398437,31.779297 17.7919921,34.9428712 20.3251953,37.1206056 L22.1298828,38.6636354 L22.1298828,41.0416872 L20.4819336,41.5522463 C20.4817505,41.5523073 20.4817505,41.5524294 20.4815674,41.5524904 L8.269043,45.3232424 C3.3232422,46.8881836 0,51.4199219 0,56.6000977 L0,66.25 C0,66.5263672 0.2236328,66.75 0.5,66.75 L12.309082,66.75 L12.309082,60.6953125 C12.309082,60.4189453 12.5327148,60.1953125 12.809082,60.1953125 C13.0854492,60.1953125 13.309082,60.4189453 13.309082,60.6953125 L13.309082,66.75 L47.690918,66.75 L47.690918,60.6953125 C47.690918,60.4189453 47.9145508,60.1953125 48.190918,60.1953125 C48.4672852,60.1953125 48.690918,60.4189453 48.690918,60.6953125 L48.690918,66.75 L60.5,66.75 C60.7763672,66.75 61,66.5263672 61,66.25 L61,56.6000977 C61,51.418457 57.6728516,46.8867188 52.7172852,45.3222656 Z M44.6499022,24.4996948 C44.7766723,24.5377807 44.9083252,24.5644531 45.0473632,24.5644531 C45.8154296,24.5644531 46.4404296,23.9394531 46.4404296,23.1708984 C46.4404296,22.8945312 46.2167968,22.6708984 45.9404296,22.6708984 C45.6640624,22.6708984 45.4404296,22.8945312 45.4404296,23.1708984 C45.4404296,23.3876953 45.2641601,23.5644531 45.0473632,23.5644531 C44.8305663,23.5644531 44.6538085,23.3876953 44.6538085,23.1708984 C44.6538085,23.1640014 44.6502074,23.1583252 44.6499022,23.1514892 L44.6499022,22.5013427 C44.6502074,22.4945068 44.6538085,22.4888305 44.6538085,22.4819335 C44.6538085,21.8564452 45.1625976,21.3476562 45.7880858,21.3476562 C46.413574,21.3476562 46.9223631,21.8564453 46.9223631,22.4819335 C46.9223631,22.7583007 47.1459959,22.9819335 47.4223631,22.9819335 C47.6987303,22.9819335 47.9223631,22.7583007 47.9223631,22.4819335 C47.9223631,21.3051757 46.9648436,20.3476562 45.7880858,20.3476562 C45.3851927,20.3476562 45.0120848,20.4663696 44.6902464,20.6611938 C44.7037962,20.5682373 44.703491,20.4729003 44.7324217,20.380371 C44.9409178,19.6103515 45.6127928,19.0131835 46.4121092,18.8930663 C47.0151365,18.7919921 47.7070311,19.0146483 48.1728514,19.4697265 C48.564453,19.8696288 48.7802733,20.3886718 48.7802733,20.9301757 L48.7802733,23.0200195 C48.7802733,24.9169922 47.2368163,26.4599609 45.3398436,26.4599609 L44.6499022,26.4599609 L44.6499022,24.4996948 L44.6499022,24.4996948 Z M16.3398439,23.1563721 C16.3396607,23.1614991 16.3369141,23.1657105 16.3369141,23.1708985 C16.3369141,23.3876954 16.1601563,23.5644532 15.9433594,23.5644532 C15.7265625,23.5644532 15.550293,23.3876954 15.550293,23.1708985 C15.550293,22.8945313 15.3266602,22.6708985 15.050293,22.6708985 C14.7739258,22.6708985 14.550293,22.8945313 14.550293,23.1708985 C14.550293,23.9394532 15.175293,24.5644532 15.9433594,24.5644532 C16.0820313,24.5644532 16.2133179,24.5379029 16.3398439,24.5000001 L16.3398439,26.459961 L15.6499024,26.459961 C13.7529297,26.459961 12.209961,24.9169922 12.209961,23.0200196 L12.209961,20.9301758 C12.209961,20.3886719 12.4257813,19.8696289 12.8095704,19.4775391 C13.209961,19.0859375 13.732422,18.8701172 14.2802735,18.8701172 C14.3847657,18.8701172 14.4892579,18.8779297 14.5908204,18.8935547 C15.3930665,19.0219727 16.0473634,19.605957 16.263672,20.4013672 C16.2886354,20.4796753 16.2884523,20.5748291 16.3011476,20.6616211 C15.9791261,20.4664917 15.6058351,20.3476563 15.2026369,20.3476563 C14.0258791,20.3476563 13.0683596,21.3051758 13.0683596,22.4819336 C13.0683596,22.7583008 13.2919924,22.9819336 13.5683596,22.9819336 C13.8447268,22.9819336 14.0683596,22.7583008 14.0683596,22.4819336 C14.0683596,21.8564453 14.5771487,21.3476563 15.2026369,21.3476563 C15.8281251,21.3476563 16.3369142,21.8564454 16.3369142,22.4819336 C16.3369142,22.4871216 16.3396608,22.491333 16.3398439,22.49646 L16.3398439,23.1563721 L16.3398439,23.1563721 Z M30.5,1.25 C30.7763672,1.25 31,1.4736328 31,1.75 C31,2.0263672 30.7763672,2.25 30.5,2.25 C19.7114258,2.25 19.0019531,6.890625 18.9960937,6.9375 C18.9643555,7.1904297 18.7490234,7.375 18.5004883,7.375 C18.4799805,7.375 18.4589844,7.3735352 18.4374924,7.3710937 C18.1635742,7.3364257 17.9692383,7.0864257 18.0039063,6.8124999 C18.0327148,6.5854492 18.8383789,1.25 30.5,1.25 Z M20.9755859,36.3608398 C18.6650391,34.375 17.3398438,31.487793 17.3398438,28.4399414 L17.3398438,26.9599609 L17.3398438,20.9301757 L17.3398438,20.25 L17.3398438,15.9101562 C17.3398438,14.3256835 17.6201172,12.7753906 18.1738282,11.2915039 C20.6513672,13.6123047 25.3647461,15.0800781 30.5,15.0800781 C35.6289063,15.0800781 40.340332,13.6142578 42.8193359,11.296875 C43.3706054,12.7568359 43.6499023,14.3051758 43.6499023,15.9101563 L43.6499023,20.25 L43.6499023,20.9301758 L43.6499023,26.959961 L43.6499023,28.4399415 C43.6499023,31.4877931 42.324707,34.3750001 40.0151367,36.3598634 L38.0523071,38.043152 C38.0466308,38.0476076 38.0387573,38.0469972 38.0332031,38.051758 L36.5048828,39.3701174 C35.7143555,40.0473635 34.8344726,40.5771487 33.8876953,40.9443362 C31.7041015,41.7988284 29.2617187,41.7919925 27.109375,40.9433596 C26.1733398,40.5839846 25.293457,40.0546877 24.4951172,39.3701174 L22.9550781,38.0502932 C22.9528808,38.0484011 22.949707,38.0487063 22.9475097,38.0468752 L20.9755859,36.3608398 Z M37.8598633,39.5255127 L37.8598633,41.4101563 L37.8598633,43.2197266 C37.8598633,44.5820313 37.1884766,45.8647461 36.0634766,46.6503907 C34.4257813,47.794922 32.4980469,48.3999024 30.4902344,48.3999024 C28.4882813,48.3999024 26.5644531,47.7949219 24.9262696,46.6499024 C23.8012696,45.8647461 23.1298829,44.5825196 23.1298829,43.2197266 L23.1298829,41.4101563 L23.1298829,39.5186768 L23.8447267,40.1298829 C24.7299806,40.8881837 25.7075197,41.4760743 26.7465822,41.8754884 C27.9311523,42.3427734 29.2290039,42.5898438 30.5,42.5898438 C31.7783203,42.5898438 33.0405273,42.3496094 34.2509766,41.8764649 C35.3017579,41.4682618 36.2792969,40.8808594 37.1567383,40.128418 L37.8598633,39.5255127 Z M39.8598633,43.2197266 C39.8598633,45.237793 38.8706055,47.1333008 37.2133789,48.2905274 C35.2392578,49.6704102 32.9140625,50.3999024 30.4902344,50.3999024 C28.0722656,50.3999024 25.7504883,49.6704102 23.7763672,48.2900391 C22.1191406,47.1328125 21.1298828,45.2373047 21.1298828,43.2197266 L21.1298828,42.3984375 L22.1298828,42.0883789 L22.1298828,43.2197266 C22.1298828,44.9086914 22.9614258,46.4975586 24.3535156,47.4697266 C26.1601562,48.7324219 28.2822265,49.3999024 30.4902344,49.3999024 C31.3204346,49.3999024 32.1381836,49.3060303 32.9313965,49.1221314 C34.2533569,48.8156739 35.5070801,48.2590943 36.6362305,47.4702149 C37.5065918,46.8623047 38.1576538,46.0136719 38.5234986,45.0503541 C38.7430421,44.4724122 38.8598633,43.8530885 38.8598633,43.2197267 L38.8598633,42.0883789 L39.8598633,42.3984376 L39.8598633,43.2197266 L39.8598633,43.2197266 Z" id="Shape" 
                            fill={salutationSelected==='Monsieur' ? "#0154c0" : "#4e6174"} fillRule="nonzero" />
                            </g>
                        </svg>

    const madameSVG =   <svg width="55.9981924px" height="68.0981301px" viewBox="0 0 55.9981924 68.0981301" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink">
                        <title>Shape</title>
                        <g id="Page-1" stroke="none" strokeWidth={1}  fillRule="evenodd">
                        <path d="M55.0591305,53.1481178 C54.3391598,50.388108 51.9590328,48.3381202 49.039111,47.9280861 C48.8790768,47.8981178 48.7190426,47.8780983 48.5591305,47.8680885 L48.408984,47.84813 L48.3590572,47.84813 L39.4090412,47.2381446 L39.3990925,47.2381446 L38.6390827,47.1880958 C38.1790607,47.1581275 37.7290485,47.0881202 37.3090656,46.9681251 L37.2890461,46.9681251 C34.6090534,46.2081153 32.6890705,43.7981422 32.6390827,41.0781105 C32.6215046,40.4028786 32.6279133,39.7753761 32.6363361,39.1905373 C34.6844928,37.7092141 36.6550739,35.5397194 38.2051227,33.0405129 C38.3073566,32.8748635 38.4064166,32.7065896 38.5063922,32.5392922 C41.9115436,31.3425759 47.96123,27.943406 46.6690547,18.768113 C44.5690791,3.84813005 37.5890948,-2.46186755 23.2590777,0.868088551 C8.61875976,4.27031025 6.95616206,27.3677224 6.42259276,48.0402077 C3.74089106,48.6290139 1.61174066,50.5695046 0.939072257,53.1481179 C-0.330947243,57.9980935 -0.0809472433,63.7181252 0.349045357,67.6481179 C0.379074657,67.9081277 0.599045357,68.0981301 0.849045357,68.0981301 L10.2590777,68.0981301 L10.2590777,62.6581277 C10.2590777,62.3780984 10.4890582,62.1581277 10.7590777,62.1581277 C11.039046,62.1581277 11.2590777,62.3780984 11.2590777,62.6581277 L11.2590777,68.0981301 L44.739062,68.0981301 L44.739062,62.6581277 C44.739062,62.3780984 44.9590937,62.1581277 45.239062,62.1581277 C45.5090815,62.1581277 45.739062,62.3780984 45.739062,62.6581277 L45.739062,68.0981301 L55.1490962,68.0981301 C55.3990962,68.0981301 55.6190669,67.9081277 55.6490962,67.6481179 C56.07915,63.7181252 56.32915,57.9980934 55.0591305,53.1481178 Z M41.4193562,25.1718605 C41.4195393,25.1708839 41.4197834,25.1699684 41.4199666,25.1689918 L41.4795369,24.8764503 C41.4824666,24.860337 41.4853963,24.841294 41.4873494,24.8222511 C41.488326,24.8163307 41.4881429,24.8119362 41.4889973,24.8060768 C41.4894856,24.8040016 41.4896077,24.8033302 41.4900959,24.801255 C41.4985188,24.764817 41.5057819,24.7322853 41.5088337,24.7177589 C41.5244587,24.6513526 41.5391071,24.5844581 41.5488728,24.5180519 C41.5605916,24.4770363 41.5713337,24.4311378 41.5762166,24.3803566 C41.5771932,24.3759621 41.5781697,24.3715675 41.5791463,24.367173 C41.6113729,24.2050636 41.644576,24.0317238 41.6475057,23.9448097 C41.6553182,23.9189308 41.6797323,23.8110206 41.6836385,23.7841652 C41.7246541,23.5185402 41.7646932,23.242173 41.7949666,22.9814308 L41.8857869,22.101548 C41.8975057,21.992173 41.9072713,21.8823097 41.9092244,21.7729347 C41.9150838,21.7275245 41.91899,21.6830909 41.91899,21.6581886 L41.9268025,21.5170753 C41.9435261,21.3408668 41.9512776,21.1724708 41.953658,21.0218971 C41.9543294,20.9949196 41.9576253,20.967881 41.9580525,20.9409034 C41.9648884,20.9077003 41.9687947,20.8735206 41.9687947,20.8383643 L41.9681233,20.5848243 C41.9681233,20.579148 41.9687947,20.5735328 41.9687947,20.5678565 L41.9678181,20.466294 C41.9795369,20.313462 41.9795369,20.1606299 41.9795369,20.0082862 C41.9795369,19.8852393 41.9795369,19.7646339 41.9785603,19.6445167 C42.1475094,19.6025245 42.3184079,19.591294 42.4824704,19.613755 C42.9531735,19.6767433 43.280322,19.9892433 43.4717282,20.2407081 C43.9531735,20.8720558 44.1592282,21.8403175 44.023486,22.8300636 C43.8877438,23.8217628 43.429736,24.6987159 42.7969235,25.1772316 C42.5459469,25.3666847 42.1475094,25.5751808 41.6758259,25.5126808 C41.5673664,25.4982765 41.4656819,25.4705665 41.3666828,25.4305885 L41.4193562,25.1718605 Z M36.4690388,47.7480934 C36.1890705,48.2781227 35.8090657,48.7681129 35.3590534,49.2181251 C35.2390583,49.3281105 35.1190632,49.4481056 34.9890583,49.5580909 C34.95909,49.5881202 34.919051,49.6180885 34.8890827,49.638108 C34.7590778,49.7581031 34.6190632,49.8680885 34.4690388,49.9681251 C34.2990559,50.09813 34.129073,50.2081153 33.9490803,50.3181007 C33.9390705,50.3281105 33.9290608,50.3381202 33.919051,50.3381202 C33.7590779,50.4380958 33.5990437,50.5381324 33.4290608,50.6280982 C33.2890462,50.7081153 33.1390828,50.7781226 32.9790486,50.8481299 C32.8290852,50.928086 32.6590413,51.008103 32.4990681,51.0681006 C32.3090657,51.1581275 32.0990437,51.2281348 31.8990925,51.2981421 C31.6590412,51.3881079 31.4090412,51.468125 31.1490925,51.5381323 C30.9790486,51.5881201 30.7990559,51.6280981 30.6190632,51.6681372 C29.7390583,51.8680884 28.8090656,51.9781348 27.8590534,51.9781348 C27.3190754,51.9781348 26.7990558,51.9481055 26.2790973,51.8680884 C26.0690753,51.8481299 25.8590534,51.8181006 25.6490924,51.7781226 C25.4490802,51.7480933 25.2590778,51.7081153 25.0690753,51.6581275 C24.8890826,51.6180884 24.7190387,51.5781104 24.5490558,51.5281226 C24.0690753,51.3981177 23.5990436,51.2381446 23.1590412,51.0381324 C22.9990681,50.9781348 22.8490436,50.9081275 22.6990803,50.8281104 L22.6890705,50.8281104 C22.4990681,50.7381446 22.3190754,50.638108 22.1390827,50.5381324 C21.9290607,50.428086 21.7290485,50.2981422 21.5390461,50.1681373 C21.3990925,50.0781104 21.2690876,49.9781349 21.1390827,49.8780982 C20.9790485,49.7681128 20.8390949,49.6481177 20.6990803,49.5281226 C20.6728352,49.5056006 20.6535481,49.4787452 20.6277912,49.455857 C20.6797321,48.664109 20.7760456,47.8552711 20.922591,47.0418555 C22.969405,45.7595679 24.3108967,43.5689551 24.3590534,41.0981299 C24.3690632,40.678086 24.3690632,40.258103 24.3690632,39.8680884 C24.7866047,40.1192481 25.1909016,40.3188941 25.5878742,40.4938819 C25.7387531,40.559983 25.8954304,40.6245582 26.0542438,40.6839454 C26.17607,40.7292335 26.297591,40.7748878 26.4167926,40.8124854 C26.4520709,40.8241431 26.4824664,40.8370826 26.5185992,40.8486182 C26.679732,40.8964698 26.8340289,40.9409034 26.9580523,40.962876 C27.0222613,40.9789893 27.0845171,40.9908911 27.1470782,41.0035254 C27.1583087,41.0056616 27.1699664,41.0088965 27.1811969,41.0109107 C27.2917316,41.0321509 27.3976276,41.0488746 27.4863727,41.0541846 C27.6689899,41.0771338 27.8398883,41.0883643 27.999068,41.0883643 C28.1582477,41.0883643 28.3291461,41.0771338 28.5449664,41.0497901 C28.6105792,41.0411231 28.671065,41.026963 28.736983,41.0167701 C28.7892901,41.0080421 28.8408648,41.0002906 28.8939044,40.9897926 C28.9318072,40.9822242 28.9759967,40.9786842 29.0107867,40.969712 C29.164107,40.9409034 29.3184039,40.8964698 29.5586383,40.8251807 C29.5901935,40.815293 29.6243732,40.7986304 29.6561114,40.7881324 C29.7468707,40.7581641 29.8407427,40.7172095 29.9329058,40.6828468 C30.1235796,40.6113746 30.317,40.5359352 30.5173785,40.4432838 C30.6602008,40.3778541 30.8049151,40.3014991 30.9501178,40.2264259 C31.0516803,40.1738136 31.1462238,40.1337745 31.2510211,40.0756691 C31.3408649,40.0258644 31.4308917,39.9694069 31.5224444,39.9159401 C31.5583941,39.8946388 31.5930621,39.8799904 31.6290728,39.8581398 C31.6290728,40.2581032 31.6290728,40.6780861 31.6390826,41.1081398 C31.6990803,44.0681007 33.6590412,46.7181252 36.4690388,47.7480934 Z M21.2184284,45.6068581 C21.632674,44.0766457 22.2898395,42.6566018 23.3054035,41.5991677 C23.1420124,43.167588 22.3898762,44.5903786 21.2184284,45.6068581 Z M17.349654,19.47313 C24.4297321,19.3530128 32.0820759,12.3032081 32.1582478,12.2324073 C32.3613728,12.0434425 32.6768025,12.0551612 32.8652791,12.2573096 C33.0527791,12.459458 33.0420369,12.7758643 32.8398885,12.9638526 C32.5166463,13.2651221 24.8330526,20.3461768 17.3672322,20.4731299 C17.3643025,20.4731299 17.3613728,20.4731299 17.3584431,20.4731299 C17.0859822,20.4731299 16.8633259,20.2548682 16.8583636,19.9814307 C16.8535603,19.7055519 17.0742634,19.4780128 17.349654,19.47313 Z M13.8682087,50.7900246 C13.9463337,51.1118019 13.7490681,51.436509 13.4268024,51.514634 C13.3789508,51.5263528 13.3320758,51.5317238 13.2852008,51.5317238 C13.014693,51.5317238 12.7685992,51.3476418 12.702193,51.0732277 C11.4746539,46.0214699 12.6406696,37.2236183 12.6904742,36.851548 C12.7353961,36.5224464 13.0371539,36.2953957 13.3652789,36.3368996 C13.6934039,36.3813332 13.9238727,36.6835793 13.8799273,37.0117043 C13.8682087,37.1005714 12.6943806,45.9584816 13.8682087,50.7900246 Z M14.3193806,25.5131691 C13.8350056,25.5776222 13.4512165,25.3661964 13.2012165,25.1772316 C12.568404,24.698716 12.1103962,23.8217628 11.974654,22.8300636 C11.8389118,21.8403175 12.0449665,20.8720558 12.5264118,20.2407081 C12.7178181,19.9892433 13.0449665,19.6767433 13.5166462,19.613755 C13.5723103,19.6059425 13.6279743,19.6025245 13.684615,19.6025245 C13.7949666,19.6025245 13.9072713,19.6166847 14.0195759,19.6445167 C14.0185993,19.7646339 14.0185993,19.8852394 14.0185993,20.0082862 C14.0185993,20.16063 14.0185993,20.313462 14.0293415,20.4282081 L14.0293415,20.5678565 L14.0293415,20.8383643 C14.0293415,20.872544 14.0332478,20.9062354 14.0400837,20.938462 C14.0402668,20.954087 14.0422199,20.9660499 14.0424641,20.9815528 C14.0460041,21.1573341 14.0540608,21.3287208 14.0693806,21.4682471 L14.0791462,21.6581885 C14.0791462,21.6840674 14.0830525,21.7309424 14.0898884,21.7778174 C14.1006306,22.0195166 14.122115,22.2612158 14.1514118,22.4863135 L14.1834553,22.7653052 C14.1838215,22.7727515 14.1800373,22.7796485 14.1807087,22.7870948 L14.2053059,22.955796 L14.2275837,23.1498878 C14.2284992,23.1570289 14.2294148,23.1637428 14.2303303,23.1708839 C14.2345417,23.2095802 14.2360676,23.2565162 14.2412556,23.2866066 C14.2490071,23.3616188 14.2599324,23.4277809 14.2705525,23.486924 L14.3027791,23.7089699 C14.3076619,23.7480324 14.3135213,23.7870949 14.3232869,23.8266457 L14.3232869,23.8261574 C14.3262166,23.8373879 14.3291463,23.8481301 14.3330525,23.8588722 C14.3535603,24.0317238 14.3867634,24.2050636 14.4238728,24.3925636 C14.4531697,24.5615089 14.4834431,24.7299659 14.5156697,24.8613136 C14.5478963,25.0502784 14.5889119,25.2289894 14.628951,25.3974464 L14.6357869,25.429673 C14.5352009,25.4706886 14.4297322,25.4985207 14.3193806,25.5131691 Z M18.1553181,31.7045753 C17.880904,31.2133644 17.615279,30.7118995 17.3603962,30.1821144 C17.2607868,29.9750831 17.1631306,29.7587746 17.0664509,29.5458839 L16.943404,29.2612159 C16.8721149,29.094712 16.7988727,28.9243018 16.7373493,28.794419 L16.6035602,28.4404151 C16.5166461,28.2123878 16.4297321,27.9838721 16.3506305,27.7524268 C16.2236774,27.3910987 16.1064899,27.0395362 15.9980914,26.6664893 C15.8916461,26.3051612 15.7832476,25.9340674 15.6943805,25.5595557 L15.6045367,25.1791846 C15.5674273,25.0204932 15.5303179,24.8622901 15.5088336,24.7680518 C15.5088336,24.7270362 15.5039508,24.6865088 15.4941852,24.646958 C15.4590289,24.5092627 15.4336383,24.3637549 15.3994586,24.1689307 C15.3711383,24.0312354 15.3437945,23.8842627 15.3086383,23.7079932 C15.3086383,23.6929786 15.3027789,23.6462867 15.2963702,23.5998999 C15.2954547,23.5958105 15.296004,23.591477 15.2949664,23.5873877 C15.2910601,23.5517432 15.2852008,23.5165869 15.2881305,23.5165869 C15.2881305,23.5165869 15.2881305,23.5170752 15.2891071,23.5180517 C15.2891071,23.4979711 15.2847126,23.4784399 15.2823322,23.4586645 C15.2812336,23.4457861 15.2806843,23.4262548 15.2793415,23.4189306 C15.2711628,23.3781591 15.2659748,23.3268285 15.2591999,23.2838598 C24.8287189,23.8816992 31.9968098,18.1546484 34.0752399,16.277329 C34.7308795,18.3983617 36.7748249,23.9866796 40.4118488,25.0801244 L40.3637531,25.3006444 C40.3561847,25.331223 40.3510578,25.3552098 40.342818,25.3876805 C40.3408038,25.4045872 40.3369586,25.4223485 40.3325641,25.4418187 C40.3216388,25.480576 40.3121784,25.5193944 40.3038776,25.558579 C40.3038776,25.5587011 40.3037555,25.5589452 40.3037555,25.5590673 C40.092818,26.4169775 39.8232867,27.2890478 39.4824664,28.2197118 C39.1250445,29.1567235 38.7119586,30.074204 38.2588336,30.9413915 C38.1094195,31.2192235 37.960982,31.4868017 37.8164508,31.7480321 C37.6680133,32.0043798 37.5107867,32.2597509 37.3545367,32.5146337 C35.8273761,34.9760595 33.8835284,37.1035009 31.879317,38.5076147 C31.8697345,38.513352 31.8583819,38.5117041 31.8490436,38.5181127 C31.5180499,38.7518773 31.1915729,38.9555517 30.8702228,39.1397558 C30.8362873,39.1589208 30.8000324,39.1821752 30.7666461,39.2006689 C30.7371661,39.2170263 30.7107989,39.2273413 30.6816241,39.2432104 C30.4114825,39.3907934 30.146651,39.5199438 29.8885943,39.629685 C29.7767779,39.6773535 29.6635577,39.7146459 29.5515582,39.7560888 C29.3279864,39.8381811 29.1054522,39.9173437 28.8958575,39.9676367 C28.868941,39.9739233 28.8472125,39.9819189 28.8184649,39.9877783 C28.5298907,40.0521094 28.2552325,40.087937 28.0005328,40.087937 C27.9985797,40.087937 27.99565,40.0874487 27.9936969,40.0874487 C27.7478473,40.0870215 27.4820392,40.0516821 27.2045734,39.9922949 C27.1918781,39.9892431 27.1840046,39.9894873 27.170943,39.9863135 C27.1519,39.9827735 27.1305988,39.9764868 27.1113117,39.9722144 C26.9232624,39.928086 26.7219684,39.8541724 26.5225666,39.7844703 C26.3242634,39.7131202 26.122298,39.6338966 25.913863,39.5403907 C25.7865437,39.4827735 25.6577595,39.4200904 25.5275715,39.35344 C25.3529499,39.264817 25.1755207,39.1708838 24.9889973,39.0602881 C24.769759,38.9309546 24.5485676,38.7920996 24.3248127,38.6394507 C24.2669514,38.5994116 24.2067707,38.5621192 24.1494587,38.5209815 C24.1484821,38.5204932 24.0664509,38.4623877 24.0654743,38.4618995 C23.9619587,38.3891456 23.8555134,38.3144386 23.7129352,38.1967628 C23.5957477,38.1157081 23.4795368,38.0253761 23.3477008,37.9145362 C23.0752399,37.7011573 22.804732,37.4682471 22.5117633,37.2060401 C22.3906695,37.1044776 22.2627399,36.9843604 22.1299274,36.8520362 C21.999068,36.7304542 21.8760211,36.6078956 21.7197711,36.4418799 C21.592818,36.3242041 21.4648883,36.1874854 21.3223102,36.0243994 C21.1904743,35.8925635 21.0596149,35.7514502 20.9355914,35.6093603 C20.0596148,34.6059423 19.2793414,33.5488134 18.6074664,32.4531103 C18.4512165,32.2158058 18.3135212,31.9780128 18.1553181,31.7045753 Z M38.7390583,49.7581032 C38.0390461,49.6981056 37.3090656,49.6481178 36.8790729,50.0381323 C36.4690387,50.4181374 36.4790485,51.0881203 36.499068,51.808091 C36.5090778,52.1381081 36.5190875,52.7581032 36.45909,52.8581398 C36.3190754,52.8981178 35.8090656,52.6381081 35.499068,52.4881447 C34.8690631,52.1681374 34.20909,51.8381203 33.6590411,52.0681008 C33.1290728,52.2881325 32.9290606,52.9380959 32.7090899,53.6280984 C32.6090533,53.9481057 32.4290606,54.5381323 32.329085,54.6180886 C32.1690508,54.5981301 31.7590777,54.2181252 31.5090777,53.9881448 C30.9890582,53.4980935 30.4490801,52.9980935 29.8490435,53.0580911 C29.2790972,53.1381082 28.9090411,53.7181253 28.5090777,54.3281106 C28.329085,54.6180886 27.9990679,55.1381082 27.8790728,55.188096 C27.7190386,55.1381082 27.3890826,54.6180887 27.2090899,54.3381204 C26.8190753,53.7181253 26.4490801,53.1381082 25.869063,53.0580911 L25.7590776,53.0580911 C25.2090898,53.0580911 24.7090898,53.5281228 24.2190385,53.978135 C23.9690385,54.2181252 23.5590654,54.5981301 23.4390702,54.6280984 C23.2990556,54.5381323 23.1190629,53.9481057 23.0190873,53.6381082 C22.7990556,52.938096 22.5990434,52.2881326 22.0690751,52.0681009 C21.6173539,51.8791971 21.091475,52.0708475 20.5633378,52.3216409 C20.5629716,52.2966165 20.5702348,52.2733621 20.5690751,52.2480935 L20.5690751,52.1880959 C20.5547929,51.7321022 20.5557084,51.231675 20.565413,50.7153786 C20.5840898,50.7292946 20.600203,50.7441872 20.6190629,50.7581032 C20.7990556,50.8981178 20.9990678,51.0381323 21.19908,51.1581276 C21.3890824,51.2781227 21.5790849,51.3981178 21.7790971,51.5081032 C21.7990556,51.518113 21.8190751,51.5281227 21.8490434,51.5381323 C22.0090776,51.6280983 22.1690507,51.7081154 22.3390947,51.7881325 C22.6090532,51.9181374 22.8790727,52.0381323 23.1690508,52.1381081 C23.2790972,52.1780861 23.3990923,52.228135 23.5190874,52.268113 C23.6390825,52.3181008 23.7590776,52.3581399 23.8890825,52.3881081 C24.1090532,52.4581154 24.3390947,52.5281227 24.5790849,52.5781105 C25.6090532,52.8381203 26.7190385,52.9781349 27.8590532,52.9781349 C28.3990923,52.9781349 28.9290605,52.9481056 29.4490801,52.888108 C29.7490679,52.8581397 30.0390459,52.8080909 30.329085,52.7581031 C30.5890948,52.7081153 30.8490435,52.6581275 31.1090533,52.5881202 C31.3590533,52.5281226 31.6090533,52.4581153 31.8590533,52.3780982 C32.0990435,52.3080909 32.329085,52.2281348 32.5590655,52.138108 C32.5890948,52.1280982 32.6190631,52.1180885 32.6490924,52.09813 C32.8490436,52.0281227 33.0490558,51.9380958 33.249068,51.84813 C33.5490558,51.7081154 33.8490436,51.5580909 34.1190631,51.3981178 C34.2590777,51.3281105 34.3890826,51.2480934 34.5090777,51.1681373 C34.5490557,51.1481178 34.579085,51.1180885 34.6090533,51.1081397 C34.7990557,50.9881446 34.9690387,50.8581397 35.1390826,50.7281348 C35.329085,50.5881202 35.5090777,50.4481055 35.6790606,50.2881324 C35.829085,50.1581275 35.9790484,50.0181129 36.119063,49.8780982 L36.2290484,49.7681128 C36.3590533,49.6280982 36.4890582,49.4781348 36.6090533,49.3281104 L36.6190631,49.3181006 C36.749068,49.1481177 36.8790729,48.9781348 36.9890582,48.8080908 C37.0090777,48.7881323 37.0190875,48.7781225 37.0190875,48.7681128 C37.1190631,48.6280982 37.2090899,48.4781348 37.2790973,48.3381201 C37.3190753,48.2781225 37.3590534,48.218125 37.3790729,48.1581274 C37.4090412,48.1180883 37.4290607,48.0781103 37.4490802,48.0381323 C37.8190753,48.1081396 38.1890704,48.1681372 38.5790851,48.1880957 L39.0190875,48.218125 C39.1090533,48.4081274 39.2190387,48.6081396 39.3190753,48.8080908 C39.4690387,49.0981299 39.7590777,49.6381079 39.7690875,49.7480932 C39.629073,49.8281105 39.0690754,49.7881325 38.7390583,49.7581032 Z" id="Shape" 
                        fill={salutationSelected==='Madame' ? "#0154c0" : "#4e6174"} fillRule="nonzero" />
                        </g>
                    </svg>

    const icons = [
        { label: "Madame", svg: madameSVG },
        { label: "Monsieur", svg: monsieurSVG },
    ];

    if (isInitializing) {
        return (
            <div className="flex items-center justify-center min-h-[200px]">
                <Loader2 className="w-8 h-8 animate-spin" />
            </div>
        );
    }

    return (
        <SEDualSelection 
            title="Civilité" 
            tip="Cette information est utilisée uniquement à des fins statistiques." 
            valueSelected={salutationSelected} 
            handleValueSelected={handleSalutationSelection}  
            handleContinue={handleContinue} 
            icons={icons} 
            showContinueBtn={user?.simulationStep === SIMULATION_ENGINE_STEPS.SALUTATION} 
        />
    );
}

export default Salutation;
